--- origsrc/audacious-2.4.3/m4/buildsys.m4	2011-01-12 05:07:36.000000000 -0600
+++ src/audacious-2.4.3/m4/buildsys.m4	2011-02-03 00:44:02.318018700 -0600
@@ -101,7 +101,23 @@ AC_DEFUN([BUILDSYS_SHARED_LIB], [
 			UNINSTALL_LIB='rm -f ${DESTDIR}${libdir}/$$i'
 			CLEAN_LIB=''
 			;;
-		cygwin* | mingw*)
+		cygwin*)
+			AC_MSG_RESULT(Cygwin)
+			LIB_CPPFLAGS='-DPIC'
+			LIB_CFLAGS=''
+			LIB_LDFLAGS='-shared -Wl,--out-implib,$(LIB:cyg%${LIB_SUFFIX}=lib%.dll.a)'
+			LIB_PREFIX='cyg'
+			LIB_SUFFIX='-${LIB_MAJOR}.dll'
+			LDFLAGS_RPATH='-Wl,-rpath,${libdir}'
+			PLUGIN_CPPFLAGS=''
+			PLUGIN_CFLAGS=''
+			PLUGIN_LDFLAGS='-shared'
+			PLUGIN_SUFFIX='.dll'
+			INSTALL_LIB='${MKDIR_P} ${DESTDIR}${bindir} && ${INSTALL} -m 755 $$i ${DESTDIR}${bindir}/$$i && ${INSTALL} -m 755 $(LIB:cyg%${LIB_SUFFIX}=lib%.dll.a) ${DESTDIR}${libdir}/$(LIB:cyg%${LIB_SUFFIX}=lib%.dll.a)'
+			UNINSTALL_LIB='rm -f ${DESTDIR}${bindir}/$$i ${DESTDIR}${libdir}/$(LIB:cyg%${LIB_SUFFIX}=lib%.dll.a)'
+			CLEAN_LIB='$(LIB:cyg%${LIB_SUFFIX}=lib%.dll.a)'
+			;;
+		mingw*)
 			AC_MSG_RESULT(Win32)
 			LIB_CPPFLAGS='-DPIC'
 			LIB_CFLAGS=''
--- origsrc/audacious-2.4.3/src/audacious/Makefile	2011-01-12 05:07:37.000000000 -0600
+++ src/audacious-2.4.3/src/audacious/Makefile	2011-02-03 03:43:48.843381500 -0600
@@ -116,9 +116,9 @@ CPPFLAGS += -std=gnu99 \
 
 LIBS += ${LDADD}						\
         -lm \
+		-L../libaudtag -laudtag		\
 		-L../libaudcore -laudcore	\
 		-L../libaudgui -laudgui \
-		-L../libaudtag -laudtag		\
 		${LIBINTL}						\
 		${EGGSM_LIBS}					\
 		${GLIB_LIBS}					\
--- origsrc/audacious-2.5.1/src/audtool/Makefile
+++ src/audacious-2.5.1/src/audtool/Makefile
@@ -1,4 +1,4 @@
-PROG = audtool
+PROG = audtool${PROG_SUFFIX}
 SRCS = main.c				\
        handlers_general.c	\
        handlers_playback.c	\
--- origsrc/audacious-2.4.3/src/libaudtag/Makefile	2011-02-03 04:26:17.512323400 -0600
+++ src/audacious-2.4.3/src/libaudtag/Makefile	2011-02-03 03:15:43.080025100 -0600
@@ -1,6 +1,4 @@
-LIB = ${LIB_PREFIX}audtag${LIB_SUFFIX}
-LIB_MAJOR = 1
-LIB_MINOR = 0
+STATIC_LIB = libaudtag.a
 
 SRCS = audtag.c		\
        util.c		\
